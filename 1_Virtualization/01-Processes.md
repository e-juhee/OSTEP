# 1. The Abstraction: The Process

## 어떻게 무한한 수의 CPU를 제공하는 것 같은 환상을 만들어낼 수 있을까?

- 답) CPU를 가상화한다.
- 시분할(time-sharing):
  - 한 프로세스를 실행하고, 얼마 후 중단시키고 다른 프로세스를 실행하는 작업을 반복한다.
  - CPU를 공유하기 때문에, 각 프로세스의 성능은 낮아진다.
- 운영체제에서 CPU 가상화를 구현하기 위해서는 (1) low-level의 `도구(machinery)`와 (2) high-level의 `지능(intelligence)`이 필요하다.
  - (1) low-level의 `도구(machinery)`
    - low-level machinery를 메커니즘이라고 부른다:
    - 메커니즘은 특정 기능을 구현하기 위한 저수준의 방법이나 프로토콜을 의미한다.
    - ex) context-switch는 OS가 한 프로그램의 실행을 멈추고, 다른 프로그램의 실행을 시작할 수 있도록 해주는 기능이다.
    - time-sharing 메커니즘은 모든 현대 운영체제에서 사용된다!
  - (2) high-level의 `지능(intelligence)`
    - 이러한 메커니즘 위에는 정책(policies)의 형태로 운영체제의 일부 지능이 존재한다.
    - 정책은 운영체제 내에서 특정 결정을 내리기 위한 알고리즘이다.
    - ex) 여러 프로그램이 실행될 수 있는 상황에서 어떤 프로그램을 실행할지. (스케줄링 정책이 이러한 결정을 내린다.)

## 1. 프로세스의 개념

- 프로세스: 실행 중인 프로그램
  - 프로그램 자체는 생명이 없는 정적인 존재로, 단순히 디스크 위에 저장된 명령어와 정적 데이터의 집합일 뿐이다.
  - 운영체제가 이러한 바이트들을 실행하고 변환해서 프로그램을 유용한 것으로 만든다.
- 특정 시점의 프로세스를 간단하게 표현하려면, 실행 중에 접근되거나 변경된 자원의 목록을 작성하면 된다.

### machine state

- 프로세스의 구성 요소를 이해하려면 하드웨어 상태(machine state)를 이해해야 한다.
  - machine state는 프로그램이 실행 중에 읽거나 업데이트할 수 있는 시스템의 상태를 의미한다.
- 메모리
  - 명령어와 읽고 쓰는 데이터는 메모리에 존재하므로 메모리(address space)는 프로세스를 구성하는 요소이다.
- 레지스터
  - 많은 명령어가 레지스터를 명시적으로 읽거나 갱신하므로, 레지스터도 프로세스 실행에 있어 매우 중요한 요소이다.
  - machine state에는 특히 중요한 몇가지 특수 레지스터가 포함되어 있다.
    - PC(program counter = 명령어 포인터, instruction pointer, IP): 프로그램의 어느 명령어가 실행 중인지 알려주는 레지스터
    - stack pointer, frame pointer: 함수의 변수와 리턴 주소를 저장하는 스택을 관리할 때 사용하는 레지스터
- 영구 저장 장치(persistent storage)
  - 이러한 I/O 정보에는 프로세스가 현재 열어 둔 파일 목록 같은 것이 포함될 수 있다.

## 2. 프로세스 API
